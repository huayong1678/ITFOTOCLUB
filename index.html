<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/stylesheet.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Athiti|Chonburi&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/itfotoclub.appspot.com/o/logo.png?alt=media&token=2ecebba5-2313-40d9-bb29-4ef6498e9e4f">
  <title>Join | IT FOTO CLUB</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="/logo.png" width="30" height="auto" class="d-inline-block align-top" alt="">
        IT FOTO CLUB
      </a>
      <!-- <a href="index.html" class="btn btn-outline-dark d-none d-md-block my-2 my-sm-0" type="link">กลับหน้าหลัก</a
        href="register.html"> -->
    </div>
  </nav>
  <div class="container full-width" id="box">
    <div class="row align-content-center">
      <div class="mx-auto col-12 col-lg-6" id="content">
        <h1 id="regist-head" class="text-center">ลงทะเบียนเข้าร่วมชุมนุมไอทีโฟโต้คลับ ปี 2563</h1>
        <div id="form-app">
          <div class="form-row">
            <div class="col-12 col-md-6">
              <label class="text-white" for="fName">ชื่อจริง *</label>

              <input @blur="isTouched.firstname = true" v-model="form.firstname" type="text"
                :class="['form-control', {'mb-3': isFirstNameValid || !isTouched.firstname}]" placeholder="พี่ปลื้ม"
                id="fName">

              <small v-if="!isFirstNameValid && isTouched.firstname"
                class="text-warning mb-3 d-inline-block">กรุณากรอกชื่อด้วยครับ</small>

            </div>
            <div class="col-12 col-md-6">
              <label class="text-white" for="lName">นามสกุล *</label>
              <input @blur="isTouched.lastname = true" v-model="form.lastname" type="text"
                :class="['form-control', {'mb-3': isLastNameValid || !isTouched.lastname}]" placeholder="หล่อมาก"
                id="lName">

              <small v-if="!isLastNameValid && isTouched.lastname"
                class="text-warning mb-3 d-inline-block">กรุณากรอกนามสกุลด้วยครับ</small>

            </div>
          </div>
          <div class="form-row">
            <div class="col-5">
              <label class="text-white" for="nName">ชื่อเล่น *</label>
              <input @blur="isTouched.nickname = true" v-model="form.nickname" type="text"
                :class="['form-control', {'mb-3': isNickNameValid || !isTouched.nickname}]" placeholder="ปาลื้ม"
                id="nName">

              <small v-if="!isNickNameValid && isTouched.nickname"
                class="text-warning mb-3 d-inline-block">กรุณากรอกชื่อเล่นด้วยครับ</small>
            </div>
            <div class="col-7">
              <label class="text-white" for="LineID">Line ID</label>
              <input v-model="form.line" type="text" class="form-control mb-3" placeholder="itfotoclub" id="LineID">
            </div>
          </div>
          <div class="form-row">
            <div class="col">
              <label class="text-white" for="FacebookURL">Facebook URL</label>
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon3">https://www.facebook.com/</span>
                </div>
                <input v-model="form.facebook" type="text" class="form-control" id="FacebookURL"
                  aria-describedby="basic-addon3" placeholder="khunpluem">
              </div>
              <!-- <input v-model="form.facebook" type="text" class="form-control"
                  placeholder="https://www.facebook.com/snapandgap" id="FacebookURL"> -->
            </div>
          </div>
          <div class="form-row">
            <div class="col-12">
              <label class="text-white" for="email">Email *</label>
              <input @blur="isTouched.email = true" v-model="form.email" type="text"
                :class="['form-control', {'mb-3': isEmailValid || !isTouched.Email}]"
                placeholder="porames@itfotoclub.com" id="email">

              <small v-if="!isEmailValid && isTouched.email"
                class="text-warning mb-3 d-inline-block">กรุณากรอกอีเมล์ด้วยครับ</small>

            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <label class="text-white" for="devices">ความสนใจ</label>
            </div>
            <div class="col-12">
              <div class="row justify-content-center">
                <div class="col-6 mb-3">
                  <button @click="handleSkillClick('photo')"
                    :class="['w-100 btn', {'btn-outline-light': !form.skills.photo}, {'active btn-outline-primary text-warning': form.skills.photo}]">ถ่ายภาพ</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleSkillClick('vdo')"
                    :class="['w-100 btn', {'btn-outline-light': !form.skills.vdo}, {'active btn-outline-primary text-warning': form.skills.vdo}]">ถ่ายวิดีโอ</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleSkillClick('artwork')"
                    :class="['w-100 btn', {'btn-outline-light': !form.skills.artwork}, {'active btn-outline-primary text-warning': form.skills.artwork}]">Artwork</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleSkillClick('lightroom')"
                    :class="['w-100 btn', {'btn-outline-light': !form.skills.lightroom}, {'active btn-outline-primary text-warning': form.skills.lightroom}]">Lightroom</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleSkillClick('editing')"
                    :class="['w-100 btn', {'btn-outline-light': !form.skills.editing}, {'active btn-outline-primary text-warning': form.skills.editing}]">ตัดต่อวิดีโอ</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleSkillClick('ccpr')"
                    :class="['w-100 btn', {'btn-outline-light': !form.skills.ccpr}, {'active btn-outline-primary text-warning': form.skills.ccpr}]">คิด Content / PR</button>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <label class="text-white" for="devices">อุปกรณ์ที่ใช้ถ่ายภาพ (เลือกได้มากกว่า 1 อย่าง)</label>
            </div>
            <div class="col-12">
              <div class="row justify-content-center">
                <div class="col-6 mb-3">
                  <button @click="handleDeviceClick('dslr')"
                    :class="['w-100 btn', {'btn-outline-light': !form.devices.dslr}, {'active btn-outline-primary text-warning': form.devices.dslr}]">DSRL</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleDeviceClick('phone')"
                    :class="['w-100 btn', {'btn-outline-light': !form.devices.phone}, {'active btn-outline-primary text-warning': form.devices.phone}]">Mirrorless</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleDeviceClick('film')"
                    :class="['w-100 btn', {'btn-outline-light': !form.devices.film}, {'active btn-outline-primary text-warning': form.devices.film}]">Film</button>
                </div>
                <div class="col-6 mb-3">
                  <button @click="handleDeviceClick('other')"
                    :class="['w-100 btn', {'btn-outline-light': !form.devices.other}, {'active btn-outline-primary text-warning': form.devices.other}]">Other</button>
                </div>
              </div>
            </div>
          </div>
          <hr>
          <div class="form-row">
            <div class="col-12">
              <label class="text-white" for="expectation">คาดหวังอะไรกับการเข้าร่วมชุมนุม</label>
              <textarea v-model="form.expectation" class="form-control mb-3" placeholder="กล้องดีๆสักสองสามตัว" id="expectation"
                row="3"></textarea>
            </div>
            <div class="col-12">
              <label class="text-white" for="reason">ขอเหตุผลน่ารักๆว่าทำไมถึงมาเข้าร่วมชุมนุมของเรา</label>
              <textarea v-model="form.reason" class="form-control mb-3" placeholder="เพราะพี่ปลื้มหล่อมากๆ" id="reason"
                row="3"></textarea>
            </div>
          </div>
          <div class="btn-row">
            <button :disabled="!isFormReady" @click="saveForm" class="btn w-100 py-3 btn-outline-light my-2 my-sm-0"
              type="submit">
              <span v-if="isFormReady">ยืนยัน !</span>
              <span v-else>กรอกข้อมูลในช่องที่จำเป็น (*) ให้ครบก่อนครับ 😢</span>
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>
  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-firestore.js"></script>
</body>

<script>
  const firebaseConfig = {
  apiKey: "AIzaSyDrpqXTNlTveRq_m5ncDs4shZrrUXBYqVk",
  authDomain: "itfotoclub.firebaseapp.com",
  databaseURL: "https://itfotoclub.firebaseio.com",
  projectId: "itfotoclub",
  storageBucket: "itfotoclub.appspot.com",
  messagingSenderId: "976319181069",
  appId: "1:976319181069:web:84dd46401d64464752c044",
  measurementId: "G-E16V7JGG88"
};
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
  var db = firebase.firestore();

  var app = new Vue({
    el: '#form-app',
    data() {
      return {
        isTouched: {
          firstname: false,
          lastname: false,
          nickname: false,
          email: false,
          facebook: false,
          line: false,
          reg: /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/
        },
        error: false,
        form: {
          firstname: '',
          lastname: '',
          nickname: '',
          email: '',
          facebook: '',
          line: '',
          skills: {
            photo: false,
            vdo: false,
            artwork: false,
            lightroom: false,
            editing: false,
            ccpr: false
          },
          devices: {
            dslr: false,
            phone: false,
            film: false,
            other: false
          },
          expectation: '',
          reason: '',
        }
      }
    },
    methods: {
      handleDeviceClick(device) {
        this.form.devices[device] = !this.form.devices[device]
      },
      handleSkillClick(skill) {
        this.form.skills[skill] = !this.form.skills[skill]
      },
      saveForm() {
        if (
          this.isFirstNameValid &&
          this.isLastNameValid &&
          this.isNickNameValid &&
          this.isEmailValid
        ) {
          db.collection('applicants').add(this.form).then(function () {
            window.location.href = '/success.html';
          })
        }
      }
    },
    computed: {
      isFormReady() {
        if (
          this.isFirstNameValid &&
          this.isLastNameValid &&
          this.isNickNameValid &&
          this.isEmailValid
        ) {
          return true;
        }
        return false;
      },
      isFirstNameValid() {
        if (this.form.firstname.length >= 2) {
          return true;
        }
        return false;
      },
      isLastNameValid() {
        if (this.form.lastname.length >= 2) {
          return true;
        }
        return false;
      },
      isNickNameValid() {
        if (this.form.nickname.length >= 1) {
          return true;
        }
        return false;
      },
      isEmailValid() {
        if (this.isTouched.reg.test(this.form.email)) {
          return true;
        }
        return false;
      }
    }
  });
  // ปวดหัวโว้ยยยยยย
</script>